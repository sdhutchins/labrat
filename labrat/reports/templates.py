# -*- coding: utf-8 -*-
"""Report templates for laboratory work."""

# QC Report Template for sequencing or general data quality
QC_REPORT_TEMPLATE = """
================================================================================
                            QUALITY CONTROL REPORT
================================================================================

Project: {{ project_name }}
Date: {{ date }}
Analyst: {{ analyst }}
{% if sample_count %}Samples: {{ sample_count }}{% endif %}

--------------------------------------------------------------------------------
                                 SUMMARY
--------------------------------------------------------------------------------
{% if summary %}
{{ summary }}
{% endif %}

--------------------------------------------------------------------------------
                              QUALITY METRICS
--------------------------------------------------------------------------------
{% for metric in metrics %}
{{ metric.name }}: {{ metric.value }}{% if metric.unit %} {{ metric.unit }}{% endif %}{% if metric.status %} [{{ metric.status }}]{% endif %}
{% endfor %}

{% if samples %}
--------------------------------------------------------------------------------
                              SAMPLE DETAILS
--------------------------------------------------------------------------------
{% for sample in samples %}
Sample: {{ sample.name }}
{% for key, value in sample.metrics.items() %}  - {{ key }}: {{ value }}
{% endfor %}
{% endfor %}
{% endif %}

{% if warnings %}
--------------------------------------------------------------------------------
                                WARNINGS
--------------------------------------------------------------------------------
{% for warning in warnings %}
âš  {{ warning }}
{% endfor %}
{% endif %}

{% if notes %}
--------------------------------------------------------------------------------
                                  NOTES
--------------------------------------------------------------------------------
{{ notes }}
{% endif %}

--------------------------------------------------------------------------------
Generated by labrat on {{ generated_at }}
================================================================================
"""

# Variant Summary Report Template
VARIANT_SUMMARY_TEMPLATE = """
================================================================================
                           VARIANT SUMMARY REPORT
================================================================================

Project: {{ project_name }}
Date: {{ date }}
Analyst: {{ analyst }}
Reference Genome: {{ reference_genome | default('N/A') }}
Total Variants: {{ total_variants }}

--------------------------------------------------------------------------------
                              VARIANT COUNTS
--------------------------------------------------------------------------------
{% if variant_counts %}
{% for category, count in variant_counts.items() %}
{{ category }}: {{ count }}
{% endfor %}
{% endif %}

{% if by_impact %}
--------------------------------------------------------------------------------
                             IMPACT DISTRIBUTION
--------------------------------------------------------------------------------
{% for impact, count in by_impact.items() %}
{{ impact }}: {{ count }}
{% endfor %}
{% endif %}

{% if by_consequence %}
--------------------------------------------------------------------------------
                          CONSEQUENCE DISTRIBUTION
--------------------------------------------------------------------------------
{% for consequence, count in by_consequence.items() %}
{{ consequence }}: {{ count }}
{% endfor %}
{% endif %}

{% if top_genes %}
--------------------------------------------------------------------------------
                           TOP AFFECTED GENES
--------------------------------------------------------------------------------
{% for gene in top_genes %}
{{ loop.index }}. {{ gene.name }} - {{ gene.variant_count }} variants
{% endfor %}
{% endif %}

{% if clinvar_variants %}
--------------------------------------------------------------------------------
                            CLINVAR VARIANTS
--------------------------------------------------------------------------------
{% for var in clinvar_variants %}
{{ var.id }}: {{ var.gene }} - {{ var.significance }}
{% endfor %}
{% endif %}

{% if notes %}
--------------------------------------------------------------------------------
                                  NOTES
--------------------------------------------------------------------------------
{{ notes }}
{% endif %}

--------------------------------------------------------------------------------
Generated by labrat on {{ generated_at }}
================================================================================
"""

# Wet Lab Report Template
WETLAB_REPORT_TEMPLATE = """
================================================================================
                           WET LAB EXPERIMENT REPORT
================================================================================

Experiment: {{ experiment_name }}
Date: {{ date }}
Researcher: {{ researcher }}
Lab/Location: {{ lab | default('N/A', true) }}

--------------------------------------------------------------------------------
                                OBJECTIVE
--------------------------------------------------------------------------------
{{ objective }}

--------------------------------------------------------------------------------
                               MATERIALS
--------------------------------------------------------------------------------
{% for material in materials %}
- {{ material.name }}{% if material.concentration %} ({{ material.concentration }}){% endif %}{% if material.vendor %} - {{ material.vendor }}{% endif %}
{% endfor %}

--------------------------------------------------------------------------------
                                METHODS
--------------------------------------------------------------------------------
{% for step in methods %}
{{ loop.index }}. {{ step }}
{% endfor %}

{% if samples %}
--------------------------------------------------------------------------------
                               SAMPLES
--------------------------------------------------------------------------------
{% for sample in samples %}
{{ sample.id }}: {{ sample.description }}{% if sample.notes %} ({{ sample.notes }}){% endif %}
{% endfor %}
{% endif %}

{% if results %}
--------------------------------------------------------------------------------
                               RESULTS
--------------------------------------------------------------------------------
{{ results }}
{% endif %}

{% if observations %}
--------------------------------------------------------------------------------
                             OBSERVATIONS
--------------------------------------------------------------------------------
{% for obs in observations %}
- {{ obs }}
{% endfor %}
{% endif %}

{% if conclusions %}
--------------------------------------------------------------------------------
                             CONCLUSIONS
--------------------------------------------------------------------------------
{{ conclusions }}
{% endif %}

{% if next_steps %}
--------------------------------------------------------------------------------
                             NEXT STEPS
--------------------------------------------------------------------------------
{% for step in next_steps %}
- {{ step }}
{% endfor %}
{% endif %}

{% if notes %}
--------------------------------------------------------------------------------
                                NOTES
--------------------------------------------------------------------------------
{{ notes }}
{% endif %}

--------------------------------------------------------------------------------
Generated by labrat on {{ generated_at }}
================================================================================
"""
